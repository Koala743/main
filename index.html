<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Platoboost: Enlace + Verificaci√≥n</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
      color: white;
      text-align: center;
      padding: 50px 20px;
    }

    h1 {
      font-size: 2em;
      margin-bottom: 20px;
    }

    button, input {
      padding: 14px 20px;
      font-size: 16px;
      border-radius: 8px;
      border: none;
      margin-top: 10px;
    }

    button {
      background: #28a745;
      color: white;
      cursor: pointer;
    }

    button:hover {
      background: #218838;
    }

    input {
      width: 300px;
      max-width: 90%;
      text-align: center;
    }

    #linkSection, #verifySection {
      margin-top: 30px;
    }

    #status, #result {
      margin-top: 15px;
      font-style: italic;
    }

    a {
      color: #aaffff;
      word-break: break-all;
      display: block;
      margin-top: 10px;
    }

    .success {
      color: #90ee90;
    }

    .error {
      color: #ffb3b3;
    }
  </style>
</head>
<body>
  <h1>üîó Platoboost Generator + Verifier</h1>

  <div id="linkSection">
    <button onclick="generateLink()">‚ú® Generar enlace de boost</button>
    <a id="boostLink" href="#" target="_blank"></a>
    <div id="status"></div>
  </div>

  <div id="verifySection">
    <input type="text" id="keyInput" placeholder="Pega aqu√≠ tu key..." />
    <br />
    <button onclick="verifyKey()">‚úÖ Verificar Key</button>
    <div id="result">Resultado: -</div>
  </div>

  <script>
    const service = 1951;
    const identifier = "web-user"; // mismo identifier
    const hostname = "https://api.platoboost.com";
    const robloxLink = "https://www.roblox.com/share?code=51ae788294f8fc41b8311f0cdc842ae7&type=Server";

    async function generateLink() {
      document.getElementById("status").textContent = "Generando enlace...";
      document.getElementById("boostLink").textContent = "";

      try {
        const res = await fetch(`${hostname}/public/start`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({ service, identifier })
        });

        const data = await res.json();
        if (data.success) {
          const link = data.data.url;
          document.getElementById("boostLink").href = link;
          document.getElementById("boostLink").textContent = link;
          document.getElementById("status").textContent = "‚úÖ Enlace generado. √Åbrelo para conseguir la key.";
        } else {
          document.getElementById("status").textContent = "‚ùå Error: " + data.message;
        }
      } catch (err) {
        document.getElementById("status").textContent = "‚ö†Ô∏è Error de red o CORS.";
      }
    }

    async function verifyKey() {
      const key = document.getElementById("keyInput").value.trim();
      if (!key) return alert("Ingresa una key primero");

      document.getElementById("result").textContent = "Verificando...";
      const nonce = Date.now().toString();

      const url = `${hostname}/public/whitelist/${service}?identifier=${identifier}&key=${encodeURIComponent(key)}&nonce=${nonce}`;

      try {
        const res = await fetch(url);
        const data = await res.json();

        if (data.success && data.data.valid === true) {
          document.getElementById("result").innerHTML = `<span class="success">‚úÖ Key v√°lida. Abriendo Roblox...</span>`;

          // Copiar al portapapeles
          await navigator.clipboard.writeText(robloxLink);

          // Abrir autom√°ticamente el enlace
          window.open(robloxLink, "_blank");
        } else {
          document.getElementById("result").innerHTML = `<span class="error">‚ùå Key inv√°lida o expirada.</span>`;
        }
      } catch (err) {
        document.getElementById("result").innerHTML = `<span class="error">üö´ Error: ${err.message}</span>`;
      }
    }
  </script>
</body>
</html>